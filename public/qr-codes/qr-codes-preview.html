<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Codes - VietCharm</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #FFF8E7 0%, #FFEFD5 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      color: #8B4513;
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #A0522D;
    }

    /* Screen Grid Layout */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-bottom: 40px;
    }

    /* Print Layout Container */
    .print-area {
      display: none;
      /* Hidden on screen by default */
    }

    .qr-card {
      background: white;
      border-radius: 20px;
      padding: 24px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(139, 69, 19, 0.1);
      transition: transform 0.3s ease;
      position: relative;
    }

    .qr-card:hover {
      transform: translateY(-5px);
    }

    .qr-card.special {
      background: linear-gradient(135deg, #FFF8DC 0%, #FFE4B5 100%);
      border: 3px solid #DAA520;
    }

    .region-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .region-bac {
      background: #DCFCE7;
      color: #22C55E;
    }

    .region-trung {
      background: #F3E8FF;
      color: #A855F7;
    }

    .region-nam {
      background: #FFEDD5;
      color: #F97316;
    }

    .region-special {
      background: linear-gradient(135deg, #DAA520 0%, #B8860B 100%);
      color: white;
    }

    .product-name {
      color: #8B4513;
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .qr-image {
      width: 160px;
      height: 160px;
      background: #fdfdfd;
      border: 1px solid #fee;
      border-radius: 12px;
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .qr-image img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .url-box {
      background: #FFF8DC;
      border: 1.5px dashed #DAA520;
      border-radius: 8px;
      padding: 8px;
      font-family: 'Consolas', monospace;
      font-size: 0.7rem;
      color: #8B4513;
      word-break: break-all;
    }

    .instructions {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-top: 40px;
      box-shadow: 0 5px 20px rgba(139, 69, 19, 0.1);
    }

    .instructions h2 {
      color: #8B4513;
      margin-bottom: 15px;
    }

    .instructions li {
      margin-bottom: 10px;
      color: #5D4037;
    }

    .print-btn {
      display: block;
      width: fit-content;
      margin: 30px auto 0;
      padding: 16px 40px;
      background: linear-gradient(135deg, #DAA520 0%, #B8860B 100%);
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(184, 134, 11, 0.3);
      transition: all 0.2s ease;
    }

    .print-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(184, 134, 11, 0.4);
    }

    .print-btn:active {
      transform: translateY(0);
    }

    .section-title {
      text-align: center;
      color: #8B4513;
      font-size: 1.5rem;
      margin: 40px 0 20px;
      padding-bottom: 10px;
      border-bottom: 2px dashed #DAA520;
    }

    @media print {
      @page {
        size: A4;
        margin: 0;
      }

      body {
        background: white;
        padding: 0;
      }

      .container>*:not(.print-area) {
        display: none !important;
      }

      .print-area {
        display: block !important;
      }

      .product-page {
        page-break-after: always;
        height: 100vh;
        width: 100vw;
        padding: 0.8cm;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(4, 1fr);
        gap: 0.3cm;
      }

      .qr-card {
        box-shadow: none;
        border: 0.5px dashed #eee;
        border-radius: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }

      .qr-card .region-badge,
      .qr-card .product-name,
      .qr-card .url-box {
        display: none !important;
      }

      .qr-image {
        width: 150px;
        height: 150px;
        margin: 0 !important;
        border: none !important;
      }

      .qr-image img {
        width: 100%;
        height: 100%;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>üçØ VietCharm - QR Codes</h1>
      <p class="subtitle">Xem tr∆∞·ªõc v√† in tem QR cho bao b√¨ s·∫£n ph·∫©m</p>
    </header>

    <!-- Special QR Code Section -->
    <h2 class="section-title">üåü M√£ QR ƒê·∫∑c Bi·ªát</h2>
    <div id="special-grid" class="grid">
      <!-- Will be populated by JS -->
    </div>

    <!-- Product QR Codes Section -->
    <h2 class="section-title">üì¶ M√£ QR S·∫£n Ph·∫©m</h2>
    <div id="preview-grid" class="grid">
      <!-- Will be populated by JS -->
    </div>

    <!-- Area specifically for printing -->
    <div id="print-area" class="print-area">
      <!-- Will be populated by JS -->
    </div>

    <div class="instructions">
      <h2>üìã H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</h2>
      <ol>
        <li>C√†i ƒë·∫∑t th∆∞ vi·ªán: <code>npm install qrcode</code></li>
        <li>Ch·∫°y file <code>node scripts/generate-qr-codes.js</code> ƒë·ªÉ t·∫°o ·∫£nh QR.</li>
        <li>Ki·ªÉm tra ·∫£nh QR hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß ·ªü ph·∫ßn xem tr∆∞·ªõc ph√≠a tr√™n.</li>
        <li>Nh·∫•n n√∫t <b>"In QR Codes"</b> ph√≠a d∆∞·ªõi.</li>
        <li>H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông chia trang: m·ªói s·∫£n ph·∫©m 1 trang A4, m·ªói trang c√≥ 12 tem QR.</li>
      </ol>
      <p style="margin-top: 15px; padding: 10px; background: #FFF8DC; border-radius: 8px; color: #8B4513;">
        <strong>üí° L∆∞u √Ω:</strong> M√£ QR "M·ªü Kh√≥a To√†n B·ªô" s·∫Ω m·ªü kh√≥a t·∫•t c·∫£ 6 s·∫£n ph·∫©m v√† c·∫•p danh hi·ªáu "ƒê·∫°i S·ª© Di S·∫£n Vi·ªát" cho ng∆∞·ªùi d√πng.
      </p>
    </div>

    <button class="print-btn" onclick="window.print()">üñ®Ô∏è In QR Codes</button>
  </div>

  <script>
    const products = [
      // Mi·ªÅn B·∫Øc
      { id: 'bac-man', name: 'M·ª©t M·∫≠n M·ªôc Ch√¢u', region: 'bac', regionName: 'Mi·ªÅn B·∫Øc', code: 'BAC_MAN_01', img: 'qr-bac-man.png' },
      { id: 'bac-mo', name: 'M·ª©t M∆° Ba V√¨', region: 'bac', regionName: 'Mi·ªÅn B·∫Øc', code: 'BAC_MO_01', img: 'qr-bac-mo.png' },
      // Mi·ªÅn Trung
      { id: 'trung-sen', name: 'M·ª©t H·∫°t Sen Hu·∫ø', region: 'trung', regionName: 'Mi·ªÅn Trung', code: 'TRUNG_SEN_01', img: 'qr-trung-sen.png' },
      { id: 'trung-dau', name: 'M·ª©t D√¢u T√¢y ƒê√† L·∫°t', region: 'trung', regionName: 'Mi·ªÅn Trung', code: 'TRUNG_DAU_01', img: 'qr-trung-dau.png' },
      // Mi·ªÅn Nam
      { id: 'nam-dua', name: 'M·ª©t D·ª´a B·∫øn Tre', region: 'nam', regionName: 'Mi·ªÅn Nam', code: 'NAM_DUA_01', img: 'qr-nam-dua.png' },
      { id: 'nam-mangcau', name: 'M·ª©t M√£ng C·∫ßu Ti·ªÅn Giang', region: 'nam', regionName: 'Mi·ªÅn Nam', code: 'NAM_MANGCAU_01', img: 'qr-nam-mangcau.png' },
    ];

    const specialCodes = [
      { id: 'vietcharm-all', name: 'üåü M·ªü Kh√≥a To√†n B·ªô', region: 'special', regionName: 'ƒê·∫∑c Bi·ªát', code: 'VIETCHARM_ALL', img: 'qr-vietcharm-all.png' },
    ];

    const regionEmoji = {
      bac: 'üçë',
      trung: 'üå∏',
      nam: 'ü••',
      special: 'üëë'
    };

    function createQRCard(product, isSpecial = false) {
      return `
        <div class="qr-card ${isSpecial ? 'special' : ''}">
          <span class="region-badge region-${product.region}">${regionEmoji[product.region]} ${product.regionName}</span>
          <h3 class="product-name">${product.name}</h3>
          <div class="qr-image">
            <img src="${product.img}" alt="QR Code ${product.name}" onerror="this.parentElement.innerHTML='<div style=\\'font-size: 10px; color: #999;\\'>Ch∆∞a c√≥ ·∫£nh QR<br>Ch·∫°y: node scripts/generate-qr-codes.js</div>'">
          </div>
          <div class="url-box">/unlock?code=${product.code}</div>
        </div>
      `;
    }

    // Populate Special QR
    const specialGrid = document.getElementById('special-grid');
    specialGrid.innerHTML = specialCodes.map(p => createQRCard(p, true)).join('');

    // Populate Preview
    const previewGrid = document.getElementById('preview-grid');
    previewGrid.innerHTML = products.map(p => createQRCard(p)).join('');

    // Populate Print Area (12 per page)
    const printArea = document.getElementById('print-area');
    let printHtml = '';
    
    // Add special code page first
    specialCodes.forEach(product => {
      printHtml += `<div class="product-page">`;
      for (let i = 0; i < 12; i++) {
        printHtml += createQRCard(product, true);
      }
      printHtml += `</div>`;
    });

    // Add product pages
    products.forEach(product => {
      printHtml += `<div class="product-page">`;
      for (let i = 0; i < 12; i++) {
        printHtml += createQRCard(product);
      }
      printHtml += `</div>`;
    });
    printArea.innerHTML = printHtml;
  </script>
</body>

</html>